# SAFETY_POLICY.md — SOME 안전 정책

## 개요
boundaryFilter 정의, 차단 기준, 완곡 대체 표현 패턴.
연애 대화에서 "선 넘는" 범위를 정의하고 안전하게 대응.

---

## 1. Risk Taxonomy (위험 분류)

| 라벨 | 설명 | 심각도 | 기본 조치 |
|------|------|--------|----------|
| MONEY | 금전 요구/송금/결제 | 🔴 높음 | 차단 |
| ADDRESS | 주소/위치 과도한 요청 | 🔴 높음 | 차단 |
| ACCOUNT | 계좌번호/카드정보 | 🔴 높음 | 차단 |
| LINK | 의심스러운 링크 | 🟠 중간 | 경고/차단 |
| SEXUAL_CONSENT | 성적 동의 없는 발언 | 🔴 높음 | 차단 |
| HATE_HARASSMENT | 혐오/괴롭힘 | 🔴 높음 | 차단 |
| ILLEGAL | 불법 행위 조장 | 🔴 높음 | 차단 |
| SELF_HARM | 자해/자살 관련 | 🔴 높음 | 차단+알림 |
| OTHER | 기타 위험 | 🟡 낮음 | 검토 |

---

## 2. boundaryFilter 차단 기준

### 2.1 무조건 차단 (shouldBlock=true)

**금전 관련:**
- 계좌번호 요청/공유
- 송금 요청
- 결제 대행 요청
- 투자 권유
- 대출/빚 관련

**개인정보:**
- 집 주소 (동/호수 단위)
- 직장 주소
- 가족 정보
- 신분증/주민번호

**성적 표현:**
- 명시적 성적 요청
- 동의 없는 성적 발언
- 신체 부위 언급 (가슴, 엉덩이 등)
- 성관계 직접 언급

**위협/불법:**
- 폭력 위협
- 스토킹 암시
- 마약/불법약물
- 불법 도박

**자해/위기:**
- 자살 언급
- 자해 언급
- 심각한 우울 표현

### 2.2 경고 후 진행 가능

**애매한 위치:**
- "어디 살아?" → 구/동 단위까지만 OK
- "회사 어디야?" → 업종/지역만 OK

**약한 플러팅:**
- "예쁘다/잘생겼다" → OK
- "몸매 좋다" → 주의

**만남 제안:**
- "밥 먹자" → OK
- "우리 집 올래?" → 관계에 따라

---

## 3. 완곡 대체 표현 패턴

### 3.1 금전 요청 시

**원본:** "계좌번호 알려줘"
**대체:** [자동 답장 불가 - 민감한 정보 관련]

**사용자 알림:**
```
⚠️ 금전/계좌 관련 대화는 자동 답장이 비활성화됩니다.
직접 확인 후 답장해주세요.
```

### 3.2 주소 요청 시

**원본:** "집 주소 알려줘"
**완곡:** "아직은 조금 이른 것 같아ㅎㅎ 좀 더 알아가자!"

**원본:** "어디 살아?"
**완곡:** "서울 쪽이야~" (구체적 주소 X)

### 3.3 성적 표현 시

**원본:** (성적 요청)
**대체:** [자동 답장 불가]

**사용자 알림:**
```
⚠️ 민감한 주제가 감지되었습니다.
직접 확인 후 대응해주세요.
```

### 3.4 과한 집착 표현

**원본:** "지금 뭐해? 왜 안 읽어? 어디야?"
**완곡:** "바쁜가 보다~ 나중에 연락해줘ㅎㅎ"

**원본:** "계속 확인하고 있어"
**완곡:** "연락 기다리고 있을게~"

---

## 4. 금지 케이스 + Safe Alternative (10개)

### 케이스 1: 계좌 요청
- ❌ "계좌번호 보내줘 돈 보내줄게"
- ✅ [차단] "금전 거래 관련은 직접 대화해주세요"

### 케이스 2: 집 주소
- ❌ "집 주소가 어떻게 돼?"
- ✅ "서울 살아~ 어디쯤이야?"

### 케이스 3: 성적 요청
- ❌ "오늘 밤에 같이 자자"
- ✅ [차단] 민감한 주제 - 직접 확인 필요

### 케이스 4: 만남 압박
- ❌ "왜 안 만나줘? 날 피하는 거야?"
- ✅ "요즘 좀 바빠서ㅠㅠ 시간 되면 꼭 보자!"

### 케이스 5: 신분증 요청
- ❌ "신분증 사진 보내줘"
- ✅ [차단] 개인정보 요청 불가

### 케이스 6: 위치 추적
- ❌ "지금 어디야? 위치 공유해"
- ✅ "밖에 있어~ 나중에 연락할게!"

### 케이스 7: 과한 플러팅
- ❌ "네 몸이 너무 좋아보여"
- ✅ [차단] 또는 "ㅋㅋㅋ 고마워~" (무시)

### 케이스 8: 자해 언급
- ❌ "살고 싶지 않아"
- ✅ [차단 + 알림] "이 대화는 전문가 상담이 필요할 수 있습니다"
- 📞 자살예방상담전화: 1393

### 케이스 9: 링크 공유
- ❌ "이 링크 눌러봐 [suspicious.link]"
- ✅ [경고] "링크는 조심해야 해서... 뭔데?"

### 케이스 10: 음주 운전 조장
- ❌ "술 마시고 운전해서 와"
- ✅ [차단] 불법 행위 조장 불가

---

## 5. 자동 차단 시 사용자 알림 템플릿

```
🛡️ 안전 필터 작동

감지된 위험: {{riskFlags}}
이유: {{blockReason}}

이 메시지는 자동 답장이 비활성화되었습니다.
직접 확인 후 대응해주세요.

[직접 답장하기] [무시하기] [신고하기]
```

---

## 6. 위기 상황 대응

### 자해/자살 감지 시
1. 즉시 차단 (자동 답장 X)
2. 사용자에게 알림
3. 전문 상담 연결 정보 제공

**알림 템플릿:**
```
🚨 위기 상황 감지

상대방이 힘든 상황에 있는 것 같습니다.
자동 답장 대신 직접 대화하거나,
전문 상담을 권유해주세요.

📞 자살예방상담전화: 1393
📞 정신건강위기상담: 1577-0199
```

---

## 7. 로깅 및 감사

모든 차단 이벤트는 로깅:
```json
{
  "timestamp": "2026-02-10T02:00:00Z",
  "event": "BLOCKED",
  "riskFlags": ["MONEY", "ACCOUNT"],
  "blockReason": "금전 거래 관련 대화",
  "messagePreview": "[REDACTED]"
}
```

**주의:** 실제 메시지 내용은 저장하지 않음 (프라이버시)
